(window["webpackJsonpfrontend-demo"]=window["webpackJsonpfrontend-demo"]||[]).push([[0],{149:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),s=n(23),r=n.n(s),l=(n(54),n(55),n(15)),i=n(16),c=n(19),u=n(17),m=n(6),h=n(18),p=n(10),d=n(8),b=n(24),f=n(48),E=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(c.a)(this,Object(u.a)(e).call(this,t))).state={post:{title:"",content:"",timestamp:0},submitError:!1},n.handleTitleChange=n.handleTitleChange.bind(Object(m.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(m.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n}return Object(h.a)(e,t),Object(i.a)(e,[{key:"handleTitleChange",value:function(t){this.setState({post:Object.assign({},this.state.post,{title:t.target.value})})}},{key:"handleContentChange",value:function(t){this.setState({post:Object.assign({},this.state.post,{content:t.target.value})})}},{key:"handleSubmit",value:function(t){var e=this,n=Date.now();fetch("".concat("quarkus","/posts"),{method:"POST",body:JSON.stringify(Object.assign({},this.state.post,{timestamp:n})),headers:{"Content-Type":"application/json"}}).then((function(t){200===t.status?(t.json().then((function(t){return console.log("Recieved response:"+t)})),window.location.reload()):e.setState({submitError:t.status})})).catch((function(t){return console.log(t)})),t.preventDefault()}},{key:"handleErrorAlert",value:function(){var t=this;if(this.state.submitError)return o.a.createElement(f.a,{variant:"danger",dismissible:!0,onClose:function(){return t.setState({submitError:!1})}},"Unable to submit post, received status ",this.state.submitError," from server.")}},{key:"render",value:function(){return o.a.createElement(d.a,{className:"post-input"},this.handleErrorAlert(),o.a.createElement(p.a,null,o.a.createElement(p.a.Group,{controlId:"formTitle"},o.a.createElement(p.a.Label,null,"Title"),o.a.createElement(p.a.Control,{type:"text",value:this.state.title,onChange:this.handleTitleChange,placeholder:"Title"})),o.a.createElement(p.a.Group,{controlId:"formContnet"},o.a.createElement(p.a.Label,null,"Content"),o.a.createElement(p.a.Control,{as:"textarea",value:this.state.content,onChange:this.handleContentChange,placeholder:"Enter text"})),o.a.createElement(b.a,{variant:"primary",type:"submit",onClick:this.handleSubmit},"Submit")))}}]),e}(o.a.Component),v=n(12),g=n(11),j=n(47),y=n.n(j),C=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(c.a)(this,Object(u.a)(e).call(this,t))).state={title:n.props.title,content:n.props.content,timestamp:n.props.timestamp},n.deletePost=n.deletePost.bind(Object(m.a)(n)),n}return Object(h.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return o.a.createElement(d.a,{className:"post"},o.a.createElement(v.a,{className:"post-title"},o.a.createElement(g.a,null,this.props.title)),o.a.createElement(v.a,{className:"post-content"},o.a.createElement(g.a,null,o.a.createElement(y.a,{source:this.props.content}))),o.a.createElement(v.a,{className:"post-footer justify-content-between"},o.a.createElement(g.a,{className:"post-time"},this.getDate(this.props.timestamp)),o.a.createElement(g.a,{className:"delete-post-button",sm:1},o.a.createElement(b.a,{variant:"danger",type:"submit",onClick:this.deletePost},"Delete"))))}},{key:"getDate",value:function(t){var e=new Date(t);return"Posted at "+e.toLocaleTimeString()+" on "+e.toLocaleDateString()}},{key:"deletePost",value:function(){fetch("".concat("quarkus","/posts"),{method:"DELETE",body:JSON.stringify(this.state),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)})),window.location.reload()}}]),e}(o.a.Component),O=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(c.a)(this,Object(u.a)(e).call(this,t))).state={posts:null},n.updatePosts=n.updatePosts.bind(Object(m.a)(n)),n}return Object(h.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;fetch("".concat("quarkus","/posts")).then((function(t){return t.json()})).then((function(e){return t.updatePosts(e)}))}},{key:"render",value:function(){return o.a.createElement(d.a,null,this.getPosts())}},{key:"updatePosts",value:function(t){Array.isArray(t)&&this.setState({posts:t})}},{key:"getPosts",value:function(){return null==this.state.posts?o.a.createElement("div",null," waiting "):this.state.posts.map((function(t){return o.a.createElement(C,{title:t.title,content:t.content,timestamp:t.timestamp,key:t.timestamp})}))}}]),e}(o.a.Component);var k=function(){return o.a.createElement(d.a,null,o.a.createElement(v.a,null,o.a.createElement(d.a,null,o.a.createElement(E,null))),o.a.createElement("div",{className:"separator"}),o.a.createElement(v.a,null,o.a.createElement(O,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(148);r.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},49:function(t,e,n){t.exports=n(149)},54:function(t,e,n){},55:function(t,e,n){}},[[49,1,2]]]);
//# sourceMappingURL=main.2a73c101.chunk.js.map